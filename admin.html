<!-- Replace the <head> section in your admin.html with this improved version -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- PWA Manifest and Icons -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#f97316">
    
    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="MenuCraft Admin">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgwIiBoZWlnaHQ9IjE4MCIgdmlld0JveD0iMCAwIDE4MCAxODAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxODAiIGhlaWdodD0iMTgwIiByeD0iMjAiIGZpbGw9IiNmOTczMTYiLz4KPHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHg9IjUwIiB5PSI1MCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTMgN1YxN0gyMVY3SDNaTTE5IDlINVYxNUgxOVY5WiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTcgMTFIMTdWMTNIN1YxMVoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo8L3N2Zz4K">
    
    <!-- Additional iOS sizes -->
    <link rel="apple-touch-icon" sizes="57x57" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTciIGhlaWdodD0iNTciIHZpZXdCb3g9IjAgMCA1NyA1NyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjU3IiBoZWlnaHQ9IjU3IiByeD0iOCIgZmlsbD0iI2Y5NzMxNiIvPgo8cGF0aCBkPSJNMTIgMTZWNDFINDVWMTZIMTJaTTQxIDE4SDE2VjM5SDQxVjE4WiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+">
    <link rel="apple-touch-icon" sizes="72x72" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzIiIGhlaWdodD0iNzIiIHZpZXdCb3g9IjAgMCA3MiA3MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjcyIiBoZWlnaHQ9IjcyIiByeD0iMTIiIGZpbGw9IiNmOTczMTYiLz4KPHBhdGggZD0iTTE2IDIwVjUySDU2VjIwSDE2Wk01MiAyMkgyMFY1MEg1MlYyMloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=">
    <link rel="apple-touch-icon" sizes="114x114" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTE0IiBoZWlnaHQ9IjExNCIgdmlld0JveD0iMCAwIDExNCAxMTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMTQiIGhlaWdodD0iMTE0IiByeD0iMTYiIGZpbGw9IiNmOTczMTYiLz4KPHBhdGggZD0iTTI0IDI4VjgySDkwVjI4SDI0Wk04NiAzMkgyOFY3OEg4NlYzMloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=">
    <link rel="apple-touch-icon" sizes="144x144" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDE0NCAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNDQiIGhlaWdodD0iMTQ0IiByeD0iMjAiIGZpbGw9IiNmOTczMTYiLz4KPHBhdGggZD0iTTMwIDM2VjEwOEgxMTRWMzZIMzBaTTExMCA0MEgzNFYxMDRIMTEwVjQwWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+">

    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#f97316">
    <meta name="msapplication-TileImage" content="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQ0IiBoZWlnaHQ9IjE0NCIgdmlld0JveD0iMCAwIDE0NCAxNDQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNDQiIGhlaWdodD0iMTQ0IiByeD0iMjAiIGZpbGw9IiNmOTczMTYiLz4KPHBhdGggZD0iTTMwIDM2VjEwOEgxMTRWMzZIMzBaTTExMCA0MEgzNFYxMDRIMTEwVjQwWiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+">

    <!-- Standard favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNCIgZmlsbD0iI2Y5NzMxNiIvPgo8cGF0aCBkPSJNOCAxMFYyMkgyNFYxMEg4Wk0yMiAxMkgxMFYyMEgyMlYxMloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=">
    
    <!-- SEO and Social -->
    <meta name="description" content="MenuCraft Admin - Real-time restaurant order management with instant notifications">
    <meta name="keywords" content="restaurant, menu, orders, management, PWA, notifications">
    
    <!-- Open Graph -->
    <meta property="og:title" content="MenuCraft Admin">
    <meta property="og:description" content="Real-time restaurant order management">
    <meta property="og:type" content="website">
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="preconnect" href="https://cdn.tailwindcss.com">

    <title>MenuCraft Admin - Dashboard</title>
    <script src="js/pameer-data.js"></script>
    <!-- React and dependencies -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">
    
    <style>
        /* Loading animation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* PWA install prompt animation */
        @keyframes slideUp {
            from { transform: translateY(100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .install-prompt {
            animation: slideUp 0.3s ease-out;
        }
        
        /* Enhanced mobile responsive */
        @media (max-width: 768px) {
            .mobile-hidden { display: none !important; }
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <!-- Load dependencies -->
    <script src="config/firebase-config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/firebase-service.js"></script>
    <script src="js/components/shared-components.js"></script>
    <script src="js/components/category-management.js"></script>
    
    <script type="text/babel">
        const { useState, useEffect } = React;
        const { getRestaurantInfo, DEFAULT_CATEGORIES, formatCurrency, formatDate, EmptyState, LoadingSpinner, ErrorMessage, Icons } = window.MenuCraftUtils;
        const { MenuItemForm } = window.MenuCraftComponents;
        const CategoryManagement = window.CategoryManagement;

        // PWA Notification System
        const PWANotifications = {
            init() {
                console.log('ðŸ”” Initializing PWA notifications...');
                
                // Register service worker
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('/sw.js')
                        .then((registration) => {
                            console.log('âœ… Service Worker registered:', registration);
                            this.setupPushNotifications(registration);
                        })
                        .catch((error) => {
                            console.error('âŒ Service Worker registration failed:', error);
                        });
                }

                // Show install prompt
                this.showInstallPrompt();
                
                // Setup real-time order monitoring
                this.setupOrderMonitoring();
            },

            async setupPushNotifications(registration) {
                // Request notification permission
                if (Notification.permission === 'default') {
                    const permission = await Notification.requestPermission();
                    console.log('ðŸ“± Notification permission:', permission);
                }
            },

            showInstallPrompt() {
                let deferredPrompt;
                
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    deferredPrompt = e;
                    
                    // Show custom install button
                    const installBtn = document.createElement('button');
                    installBtn.textContent = 'ðŸ“± Install App';
                    installBtn.className = 'fixed bottom-20 right-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg hover:bg-blue-600 z-50';
                    installBtn.onclick = async () => {
                        if (deferredPrompt) {
                            deferredPrompt.prompt();
                            const { outcome } = await deferredPrompt.userChoice;
                            console.log('Install prompt outcome:', outcome);
                            deferredPrompt = null;
                            installBtn.remove();
                        }
                    };
                    document.body.appendChild(installBtn);
                    
                    // Auto-remove after 10 seconds
                    setTimeout(() => {
                        if (installBtn.parentNode) {
                            installBtn.remove();
                        }
                    }, 10000);
                });
            },

            setupOrderMonitoring() {
                console.log('ðŸ” Setting up order monitoring...');
                
                if (!window.db) {
                    console.error('âŒ Firebase not available');
                    return;
                }

                // Listen for new orders in real-time
                window.db.collection('orders')
                    .where('status', '==', 'pending')
                    .orderBy('createdAt', 'desc')
                    .onSnapshot((snapshot) => {
                        console.log('ðŸ“Š Order snapshot received, changes:', snapshot.docChanges().length);
                        
                        snapshot.docChanges().forEach((change) => {
                            if (change.type === 'added') {
                                const order = change.doc.data();
                                console.log('ðŸ†• New order detected:', order);
                                this.showOrderNotification(order);
                            }
                        });
                    }, (error) => {
                        console.error('âŒ Order monitoring error:', error);
                    });
            },

            showOrderNotification(order) {
                console.log('ðŸ”” Showing notification for order:', order);
                
                // Browser notification
                if (Notification.permission === 'granted') {
                    const notification = new Notification('ðŸ”” New Order!', {
                        body: `From: ${order.customerInfo?.name}\nTotal: $${order.total}`,
                        icon: '/manifest.json',
                        badge: '/manifest.json',
                        vibrate: [200, 100, 200],
                        requireInteraction: true,
                        actions: [
                            { action: 'view', title: 'View Order' },
                            { action: 'dismiss', title: 'Dismiss' }
                        ]
                    });

                    notification.onclick = () => {
                        window.focus();
                        // Switch to orders tab if function exists
                        if (window.setActiveTab) {
                            window.setActiveTab('orders');
                        }
                        notification.close();
                    };
                    
                    console.log('ðŸ“± Browser notification shown');
                } else {
                    console.log('ðŸš« Notification permission not granted');
                }

                // Play notification sound
                try {
                    const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LNeSUGLIHO8diJOQgZZ7zs559NEAxPqOPwtmMcBjiS1/LNeSUGLIHO8tiJOQgZZ7vs559NEAxPp+PwtmMcBjmS1/LNeSUGLIHO8tiJOQgZZ7zs559NEAxPp+PwtmMcBzmS1/LNeSUGLIHO8tiJOQgZZ7zs559NEAxPp+PwtmMcBzmS1/LNeSUGLIHO8tiJOQgZZ7zs559N');
                    audio.play().catch(() => {
                        console.log('ðŸ”‡ Audio notification failed (normal on mobile)');
                    });
                    console.log('ðŸ”Š Audio notification played');
                } catch (error) {
                    console.log('ðŸ”‡ Audio error:', error);
                }

                // Visual indicator in title
                const originalTitle = document.title;
                document.title = 'ðŸ”” New Order! - MenuCraft Admin';
                setTimeout(() => {
                    document.title = originalTitle;
                }, 5000);
                
                console.log('âœ… All notifications completed');
            }
        };

        // Admin Panel Component
        const AdminPanel = () => {
            const [restaurantInfo, setRestaurantInfo] = useState(null);
            const [firebaseService, setFirebaseService] = useState(null);
            const [menuItems, setMenuItems] = useState([]);
            const [orders, setOrders] = useState([]);
            const [categories, setCategories] = useState([]);
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            const [showAddForm, setShowAddForm] = useState(false);
            const [editingItem, setEditingItem] = useState(null);
            const [activeTab, setActiveTab] = useState('menu');

            // Make setActiveTab globally available for notifications
            window.setActiveTab = setActiveTab;
navigator.serviceWorker.addEventListener('message', (event) => {
  if (event.data && event.data.type === 'SWITCH_TAB') {
    if (window.setActiveTab) {
      window.setActiveTab(event.data.tab);
    }
  }
});
            // Initialize
            useEffect(() => {
                const restaurant = getRestaurantInfo();
                setRestaurantInfo(restaurant);
                setFirebaseService(new window.FirebaseService());
                
                // Initialize PWA notifications
                PWANotifications.init();
            }, []);

            // Load data
            useEffect(() => {
                if (firebaseService) {
                    loadData();
                }
            }, [firebaseService]);

            const loadData = async () => {
                try {
                    setLoading(true);
                    setError(null);
                    const [itemsData, ordersData, categoriesData] = await Promise.all([
                        firebaseService.getMenuItems(),
                        firebaseService.getOrders(20),
                        firebaseService.getCategories()
                    ]);
                    setMenuItems(itemsData);
                    setOrders(ordersData);
                    setCategories(categoriesData);
                } catch (error) {
                    console.error('Error loading data:', error);
                    setError('Failed to load data. Please try again.');
                } finally {
                    setLoading(false);
                }
            };

            const handleAddItem = async (itemData) => {
                try {
                    await firebaseService.addMenuItem(itemData);
                    setShowAddForm(false);
                    await loadData();
                } catch (error) {
                    console.error('Error adding item:', error);
                    throw error;
                }
            };

            const handleUpdateItem = async (id, updates) => {
                try {
                    await firebaseService.updateMenuItem(id, updates);
                    setEditingItem(null);
                    await loadData();
                } catch (error) {
                    console.error('Error updating item:', error);
                    throw error;
                }
            };

            const handleDeleteItem = async (id) => {
                if (confirm('Are you sure you want to delete this item?')) {
                    try {
                        await firebaseService.deleteMenuItem(id);
                        await loadData();
                    } catch (error) {
                        console.error('Error deleting item:', error);
                        alert('Error deleting item. Please try again.');
                    }
                }
            };

            const toggleStock = async (item) => {
                try {
                    await firebaseService.toggleItemStock(item.id, !item.inStock);
                    await loadData();
                } catch (error) {
                    console.error('Error toggling stock:', error);
                    alert('Error updating stock status. Please try again.');
                }
            };

            const updateOrderStatus = async (orderId, status) => {
                try {
                    await firebaseService.updateOrderStatus(orderId, status);
                    await loadData();
                } catch (error) {
                    console.error('Error updating order status:', error);
                    alert('Error updating order status. Please try again.');
                }
            };

            const handleCategoriesChange = (newCategories) => {
                setCategories(newCategories);
            };

            if (loading) {
                return React.createElement('div', { 
                    className: 'min-h-screen flex items-center justify-center bg-gray-100' 
                },
                    React.createElement('div', { className: 'text-center' },
                        React.createElement(LoadingSpinner, { size: 48 }),
                        React.createElement('p', { className: 'text-gray-600 mt-4' }, 'Loading admin dashboard...')
                    )
                );
            }

            return React.createElement('div', { className: 'min-h-screen bg-gray-100' },
                // Header
                React.createElement('div', { className: 'bg-white shadow-sm' },
                    React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-6' },
                        React.createElement('div', { className: 'flex flex-col md:flex-row justify-between items-start md:items-center gap-4' },
                            React.createElement('div', null,
                                React.createElement('h1', { className: 'text-3xl font-bold text-gray-800' }, 'MenuCraft Admin'),
                                React.createElement('p', { className: 'text-gray-600' }, 
                                    `Managing: ${restaurantInfo?.displayName || 'Restaurant'}`
                                ),
                                React.createElement('p', { className: 'text-xs text-green-600 mt-1' }, 
                                    `ðŸ”” PWA Notifications: ${Notification.permission === 'granted' ? 'Enabled' : 'Disabled'}`
                                )
                            ),
                            React.createElement('div', { className: 'flex gap-3' },
                                React.createElement('a', {
                                    href: 'index.html',
                                    className: 'bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors'
                                }, 'View Menu'),
                                React.createElement('button', {
                                    onClick: () => setShowAddForm(true),
                                    className: 'bg-orange-500 text-white px-4 py-2 rounded-lg hover:bg-orange-600 transition-colors'
                                }, '+ Add Menu Item')
                            )
                        )
                    )
                ),

                // Navigation Tabs
                React.createElement('div', { className: 'bg-white border-b' },
                    React.createElement('div', { className: 'max-w-7xl mx-auto px-4' },
                        React.createElement('div', { className: 'flex space-x-8' },
                            React.createElement('button', {
                                onClick: () => setActiveTab('menu'),
                                className: `py-4 px-1 border-b-2 font-medium text-sm ${
                                    activeTab === 'menu' 
                                        ? 'border-orange-500 text-orange-600' 
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`
                            }, `Menu Items (${menuItems.length})`),
                            React.createElement('button', {
                                onClick: () => setActiveTab('orders'),
                                className: `py-4 px-1 border-b-2 font-medium text-sm ${
                                    activeTab === 'orders' 
                                        ? 'border-orange-500 text-orange-600' 
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`
                            }, `Recent Orders (${orders.length})`),
                            React.createElement('button', {
                                onClick: () => setActiveTab('categories'),
                                className: `py-4 px-1 border-b-2 font-medium text-sm ${
                                    activeTab === 'categories' 
                                        ? 'border-orange-500 text-orange-600' 
                                        : 'border-transparent text-gray-500 hover:text-gray-700'
                                }`
                            }, `Categories (${categories.length})`)
                        )
                    )
                ),

                // Main Content
                React.createElement('div', { className: 'max-w-7xl mx-auto px-4 py-6' },
                    error ? React.createElement(ErrorMessage, {
                        message: error,
                        onRetry: loadData
                    }) :

                    activeTab === 'menu' ? 
                        // Menu Items Tab
                        React.createElement('div', { className: 'bg-white rounded-lg shadow-sm' },
                            React.createElement('div', { className: 'p-6' },
                                React.createElement('div', { className: 'flex justify-between items-center mb-6' },
                                    React.createElement('h2', { className: 'text-xl font-semibold' }, 'Menu Items'),
                                    React.createElement('span', { className: 'text-gray-500' }, 
                                        `${menuItems.length} total items`
                                    )
                                ),
                                
                                menuItems.length === 0 ? 
                                    React.createElement(EmptyState, {
                                        title: 'No Menu Items',
                                        message: 'Start building your menu by adding your first item.',
                                        actionText: 'Add First Item',
                                        onAction: () => setShowAddForm(true)
                                    }) :
                                    React.createElement('div', { className: 'overflow-x-auto' },
                                        React.createElement('table', { className: 'w-full' },
                                            React.createElement('thead', null,
                                                React.createElement('tr', { className: 'border-b' },
                                                    React.createElement('th', { className: 'text-left py-3 px-4 font-medium' }, 'Item'),
                                                    React.createElement('th', { className: 'text-left py-3 px-4 font-medium' }, 'Category'),
                                                    React.createElement('th', { className: 'text-left py-3 px-4 font-medium' }, 'Price'),
                                                    React.createElement('th', { className: 'text-left py-3 px-4 font-medium' }, 'Status'),
                                                    React.createElement('th', { className: 'text-left py-3 px-4 font-medium' }, 'Actions')
                                                )
                                            ),
                                            React.createElement('tbody', null,
                                                menuItems.map(item =>
                                                    React.createElement('tr', { 
                                                        key: item.id, 
                                                        className: 'border-b hover:bg-gray-50' 
                                                    },
                                                        React.createElement('td', { className: 'py-4 px-4' },
                                                            React.createElement('div', null,
                                                                React.createElement('div', { 
                                                                    className: 'font-medium flex items-center gap-2' 
                                                                }, 
                                                                    item.name,
                                                                    item.vegetarian && React.createElement('span', { 
                                                                        className: 'text-green-600' 
                                                                    }, 'ðŸŒ±'),
                                                                    item.spicy && React.createElement('span', { 
                                                                        className: 'text-red-600' 
                                                                    }, 'ðŸŒ¶ï¸')
                                                                ),
                                                                React.createElement('div', { 
                                                                    className: 'text-sm text-gray-500 truncate max-w-xs' 
                                                                }, item.description)
                                                            )
                                                        ),
                                                        React.createElement('td', { 
                                                            className: 'py-4 px-4 capitalize' 
                                                        }, 
                                                            categories.find(cat => cat.id === item.category)?.name || 
                                                            DEFAULT_CATEGORIES.find(cat => cat.id === item.category)?.name || 
                                                            item.category
                                                        ),
                                                        React.createElement('td', { 
                                                            className: 'py-4 px-4 font-medium' 
                                                        }, formatCurrency(item.price)),
                                                        React.createElement('td', { className: 'py-4 px-4' },
                                                            React.createElement('button', {
                                                                onClick: () => toggleStock(item),
                                                                className: `px-3 py-1 rounded-full text-xs font-medium ${
                                                                    item.inStock 
                                                                        ? 'bg-green-100 text-green-800 hover:bg-green-200' 
                                                                        : 'bg-red-100 text-red-800 hover:bg-red-200'
                                                                }`
                                                            }, item.inStock ? 'In Stock' : 'Out of Stock')
                                                        ),
                                                        React.createElement('td', { className: 'py-4 px-4' },
                                                            React.createElement('div', { className: 'flex gap-2' },
                                                                React.createElement('button', {
                                                                    onClick: () => setEditingItem(item),
                                                                    className: 'text-blue-600 hover:text-blue-800 p-1 hover:bg-blue-100 rounded',
                                                                    title: 'Edit item'
                                                                }, React.createElement(Icons.Edit, { size: 16 })),
                                                                React.createElement('button', {
                                                                    onClick: () => handleDeleteItem(item.id),
                                                                    className: 'text-red-600 hover:text-red-800 p-1 hover:bg-red-100 rounded',
                                                                    title: 'Delete item'
                                                                }, React.createElement(Icons.Trash2, { size: 16 }))
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                            )
                        ) :

                        activeTab === 'orders' ?
                        // Orders Tab
                        React.createElement('div', { className: 'bg-white rounded-lg shadow-sm' },
                            React.createElement('div', { className: 'p-6' },
                                React.createElement('div', { className: 'flex justify-between items-center mb-6' },
                                    React.createElement('h2', { className: 'text-xl font-semibold' }, 'Recent Orders'),
                                    React.createElement('span', { className: 'text-gray-500' }, 
                                        `${orders.length} recent orders`
                                    )
                                ),
                                
                                orders.length === 0 ? 
                                    React.createElement(EmptyState, {
                                        title: 'No Orders Yet',
                                        message: 'Orders will appear here when customers start placing them.',
                                        actionText: null,
                                        onAction: null
                                    }) :
                                    React.createElement('div', { className: 'space-y-4' },
                                        orders.map(order =>
                                            React.createElement('div', {
                                                key: order.id,
                                                className: 'border rounded-lg p-4 hover:shadow-md transition-shadow'
                                            },
                                                React.createElement('div', { 
                                                    className: 'flex justify-between items-start mb-3' 
                                                },
                                                    React.createElement('div', null,
                                                        React.createElement('h3', { 
                                                            className: 'font-semibold' 
                                                        }, order.orderNumber || order.id),
                                                        React.createElement('p', { 
                                                            className: 'text-sm text-gray-600' 
                                                        }, order.customerInfo?.name),
                                                        React.createElement('p', { 
                                                            className: 'text-xs text-gray-500' 
                                                        }, formatDate(order.createdAt))
                                                    ),
                                                    React.createElement('div', { className: 'text-right' },
                                                        React.createElement('div', { 
                                                            className: 'font-semibold text-lg' 
                                                        }, formatCurrency(order.total)),
                                                        React.createElement('select', {
                                                            value: order.status,
                                                            onChange: (e) => updateOrderStatus(order.id, e.target.value),
                                                            className: `text-xs px-2 py-1 rounded border ${
                                                                order.status === 'pending' ? 'bg-yellow-50 border-yellow-200 text-yellow-800' :
                                                                order.status === 'confirmed' ? 'bg-blue-50 border-blue-200 text-blue-800' :
                                                                order.status === 'preparing' ? 'bg-orange-50 border-orange-200 text-orange-800' :
                                                                order.status === 'ready' ? 'bg-green-50 border-green-200 text-green-800' :
                                                                order.status === 'delivered' ? 'bg-gray-50 border-gray-200 text-gray-800' :
                                                                'bg-red-50 border-red-200 text-red-800'
                                                            }`
                                                        },
                                                            React.createElement('option', { value: 'pending' }, 'Pending'),
                                                            React.createElement('option', { value: 'confirmed' }, 'Confirmed'),
                                                            React.createElement('option', { value: 'preparing' }, 'Preparing'),
                                                            React.createElement('option', { value: 'ready' }, 'Ready'),
                                                            React.createElement('option', { value: 'delivered' }, 'Delivered'),
                                                            React.createElement('option', { value: 'cancelled' }, 'Cancelled')
                                                        )
                                                    )
                                                ),
                                                React.createElement('div', { className: 'mt-3' },
                                                    React.createElement('h4', { 
                                                        className: 'text-sm font-medium mb-2' 
                                                    }, 'Items:'),
                                                    React.createElement('div', { className: 'text-sm text-gray-600' },
                                                        order.items?.map((item, index) =>
                                                            React.createElement('span', { key: index },
                                                                `${item.name} x${item.quantity}`,
                                                                index < order.items.length - 1 ? ', ' : ''
                                                            )
                                                        ) || 'No items'
                                                    ),
                                                    order.specialInstructions && React.createElement('div', { 
                                                        className: 'mt-2 text-sm' 
                                                    },
                                                        React.createElement('strong', null, 'Note: '),
                                                        order.specialInstructions
                                                    )
                                                )
                                            )
                                        )
                                    )
                            )
                        ) :

                        activeTab === 'categories' ?
                        // Categories Tab
                        CategoryManagement ? React.createElement(CategoryManagement, {
                            firebaseService: firebaseService,
                            onCategoriesChange: handleCategoriesChange
                        }) :
                        React.createElement('div', { className: 'bg-white rounded-lg shadow-sm' },
                            React.createElement('div', { className: 'p-6' },
                                React.createElement('div', { className: 'text-center py-12' },
                                    React.createElement('div', { className: 'text-6xl mb-4' }, 'ðŸ—ï¸'),
                                    React.createElement('h3', { className: 'text-xl font-semibold text-gray-800 mb-2' }, 'Categories Management'),
                                    React.createElement('p', { className: 'text-gray-600 mb-6' }, 'Category management component not loaded. Please check category-management.js file.'),
                                    React.createElement('a', {
                                        href: 'https://console.firebase.google.com',
                                        target: '_blank',
                                        className: 'bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 inline-block'
                                    }, 'Open Firebase Console')
                                )
                            )
                        ) :

                        null
                ),

                // Add/Edit Form Modal
                (showAddForm || editingItem) && React.createElement(MenuItemForm, {
                    item: editingItem,
                    onSubmit: editingItem ? 
                        (updates) => handleUpdateItem(editingItem.id, updates) : 
                        handleAddItem,
                    onClose: () => {
                        setShowAddForm(false);
                        setEditingItem(null);
                    }
                })
            );
        };

        // Use React 18 createRoot
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot ? ReactDOM.createRoot(container) : ReactDOM.render;
        
        if (ReactDOM.createRoot) {
            root.render(React.createElement(AdminPanel));
        } else {
            root(React.createElement(AdminPanel), container);
        }
    </script>







<script>
// Enhanced PWA Installation Handler
class PWAInstaller {
    constructor() {
        this.deferredPrompt = null;
        this.isInstalled = false;
        this.init();
    }

    init() {
        this.checkInstallStatus();
        this.setupInstallPrompt();
        this.addInstallButton();
    }

    checkInstallStatus() {
        const isStandalone = window.matchMedia('(display-mode: standalone)').matches;
        const isIOSStandalone = window.navigator.standalone === true;
        this.isInstalled = isStandalone || isIOSStandalone;
        
        if (!this.isInstalled) {
            console.warn('âš ï¸ App not installed as PWA - notifications may not work properly');
            this.showInstallReminder();
        } else {
            console.log('âœ… App is installed as PWA');
        }
    }

    setupInstallPrompt() {
        window.addEventListener('beforeinstallprompt', (e) => {
            console.log('ðŸ“± PWA install prompt available');
            e.preventDefault();
            this.deferredPrompt = e;
            this.showInstallBanner();
        });

        window.addEventListener('appinstalled', () => {
            console.log('âœ… PWA installed successfully');
            this.isInstalled = true;
            this.hideInstallBanner();
        });
    }

    showInstallBanner() {
        if (document.getElementById('pwa-install-banner')) return;

        const banner = document.createElement('div');
        banner.id = 'pwa-install-banner';
        banner.innerHTML = `
            <div style="
                position: fixed;
                bottom: 0;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, #f97316, #ea580c);
                color: white;
                padding: 16px 20px;
                box-shadow: 0 -4px 12px rgba(0,0,0,0.2);
                z-index: 1000;
                animation: slideUp 0.3s ease-out;
            ">
                <div style="max-width: 600px; margin: 0 auto; display: flex; align-items: center; gap: 15px;">
                    <div style="font-size: 28px;">ðŸ“±</div>
                    <div style="flex: 1;">
                        <div style="font-weight: bold; margin-bottom: 4px;">Install MenuCraft</div>
                        <div style="font-size: 14px; opacity: 0.9;">Get instant notifications for new orders</div>
                    </div>
                    <button id="install-now-btn" style="
                        background: white;
                        color: #f97316;
                        border: none;
                        padding: 10px 20px;
                        border-radius: 8px;
                        font-weight: bold;
                        cursor: pointer;
                        margin-right: 10px;
                    ">Install</button>
                    <button id="install-dismiss-btn" style="
                        background: none;
                        color: white;
                        border: 1px solid rgba(255,255,255,0.5);
                        padding: 10px 16px;
                        border-radius: 8px;
                        cursor: pointer;
                    ">Later</button>
                </div>
            </div>
            <style>
                @keyframes slideUp {
                    from { transform: translateY(100%); }
                    to { transform: translateY(0); }
                }
            </style>
        `;

        document.body.appendChild(banner);

        // Handle install button
        document.getElementById('install-now-btn').onclick = () => {
            this.installPWA();
        };

        // Handle dismiss button
        document.getElementById('install-dismiss-btn').onclick = () => {
            this.hideInstallBanner();
        };
    }

    async installPWA() {
        if (this.deferredPrompt) {
            this.deferredPrompt.prompt();
            const { outcome } = await this.deferredPrompt.userChoice;
            console.log('Install prompt outcome:', outcome);
            
            if (outcome === 'accepted') {
                this.hideInstallBanner();
            }
            this.deferredPrompt = null;
        } else {
            // Show manual installation guide
            window.open('/install.html', '_blank');
        }
    }

    hideInstallBanner() {
        const banner = document.getElementById('pwa-install-banner');
        if (banner) {
            banner.style.animation = 'slideUp 0.3s ease-out reverse';
            setTimeout(() => banner.remove(), 300);
        }
    }

    showInstallReminder() {
        if (this.isInstalled) return;

        // Show a subtle reminder after 10 seconds
        setTimeout(() => {
            if (!this.isInstalled && !document.getElementById('pwa-install-banner')) {
                const reminder = document.createElement('div');
                reminder.innerHTML = `
                    <div style="
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: #fef3c7;
                        color: #92400e;
                        padding: 12px 16px;
                        border-radius: 8px;
                        border-left: 4px solid #f59e0b;
                        max-width: 300px;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                        z-index: 999;
                        animation: slideIn 0.3s ease-out;
                    ">
                        <div style="font-weight: bold; margin-bottom: 4px;">ðŸ’¡ Pro Tip</div>
                        <div style="font-size: 13px; line-height: 1.4;">
                            Install this app for reliable notifications! 
                            <a href="/install.html" target="_blank" style="color: #92400e; text-decoration: underline;">Learn how</a>
                        </div>
                        <button onclick="this.parentElement.remove()" style="
                            position: absolute;
                            top: 8px;
                            right: 8px;
                            background: none;
                            border: none;
                            color: #92400e;
                            cursor: pointer;
                            font-size: 16px;
                        ">Ã—</button>
                    </div>
                    <style>
                        @keyframes slideIn {
                            from { transform: translateX(100%); opacity: 0; }
                            to { transform: translateX(0); opacity: 1; }
                        }
                    </style>
                `;
                document.body.appendChild(reminder);

                // Auto remove after 15 seconds
                setTimeout(() => {
                    if (reminder.parentElement) {
                        reminder.remove();
                    }
                }, 15000);
            }
        }, 10000);
    }

    addInstallButton() {
        // Add install button to header if not installed
        setTimeout(() => {
            if (!this.isInstalled) {
                const header = document.querySelector('.max-w-7xl .flex.gap-3');
                if (header && !document.getElementById('header-install-btn')) {
                    const installBtn = document.createElement('button');
                    installBtn.id = 'header-install-btn';
                    installBtn.innerHTML = 'ðŸ“± Install App';
                    installBtn.className = 'bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors text-sm mobile-hidden';
                    installBtn.onclick = () => this.installPWA();
                    header.appendChild(installBtn);
                }
            }
        }, 1000);
    }
}

// Initialize PWA installer when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        new PWAInstaller();
    });
} else {
    new PWAInstaller();
}
</script>
<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js')
    .then(reg => console.log('SW registered:', reg))
    .catch(err => console.log('SW registration failed:', err));
}
</script>
</body>
</html>